function K(e){window.enmity.plugins.registerPlugin(e)}const i=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const c=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog;const Q=window.enmity.modules.common.Token;window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const Z=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const G=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const u={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,n)=>window.enmity.modules.filters.byName(e,n),byTypeName:(e,n)=>window.enmity.modules.filters.byTypeName(e,n),byDisplayName:(e,n)=>window.enmity.modules.filters.byDisplayName(e,n)};function f(...e){return window.enmity.modules.bulk(...e)}function A(...e){return window.enmity.modules.getByProps(...e)}window.enmity.modules.common;function C(e){return window.enmity.patcher.create(e)}var T="RemoveAllEmbeds",E="1.0.0",O="Remove all embeds from a message",S=[{name:"Yan.",id:"735538297815957584"}],R="https://github.com/Yan-Jobs/remove-all-embeds",Y="https://github.com/Yan-Jobs/",z="1.0.0-beta.4",p={name:T,version:E,description:O,authors:S,repo:R,github:Y,release:z};function a(e){return window.enmity.assets.getIDByName(e)}const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList;const ee=o.Image;o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const oe=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch;const g=o.Text;o.TextInput,o.TouchableHighlight;const h=o.TouchableOpacity;o.TouchableWithoutFeedback,o.Touchable;const b=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel,o.FormRadio;const _=o.FormRow;o.FormSection,o.FormSelect,o.FormSubLabel,o.FormSwitch,o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;const v=window.enmity.modules.common.Components.General.Animated,[F,ie]=f(u.byProps("transitionToGuild"),u.byProps("setString"));var te=()=>{const e=G.createThemedStyleSheet({container:{paddingTop:30,paddingLeft:20,marginBottom:-5,flexDirection:"row"},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},image:{width:75,height:75,borderRadius:10},main_text:{opacity:.975,letterSpacing:.25},header:{color:i.ThemeColorMap.HEADER_PRIMARY,fontFamily:i.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:i.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),n=t.useRef(new v.Value(1)).current,m=()=>{v.spring(n,{toValue:1.1,duration:250,useNativeDriver:!0}).start()},s=()=>{v.spring(n,{toValue:1,duration:250,useNativeDriver:!0}).start()},l=()=>{F.openURL(R)},r={transform:[{scale:n}]};return t.createElement(t.Fragment,null,t.createElement(b,{style:e.container},t.createElement(h,{onPress:l,onPressIn:m,onPressOut:s},t.createElement(v.View,{style:[r]},t.createElement(ee,{style:[e.image],source:{uri:"https://cdn.discordapp.com/avatars/735538297815957584/a_2913d42512a616bb73678e97ccdcc4e9.gif?size=1024"}}))),t.createElement(b,{style:e.text_container},t.createElement(h,{onPress:()=>{F.openURL(R)}},t.createElement(g,{style:[e.main_text,e.header]},T," ")),t.createElement(b,{style:{flexDirection:"row"}},t.createElement(g,{style:[e.main_text,e.sub_header]},"A project by"),t.createElement(h,{onPress:()=>{F.openURL(Y)}},t.createElement(g,{style:[e.main_text,e.sub_header,{paddingLeft:4,fontFamily:i.Fonts.DISPLAY_BOLD}]},S[0].name," & ",S[1].name))),t.createElement(b,null,t.createElement(h,{style:{flexDirection:"row"},onPress:()=>{}},t.createElement(g,{style:[e.main_text,e.sub_header]},"Version:"),t.createElement(g,{style:[e.main_text,e.sub_header,{paddingLeft:4,fontFamily:i.Fonts.DISPLAY_BOLD}]},E," "))))))};f(u.byProps("transitionToGuild"),u.byProps("setString"));var ne=({settings:e})=>{a("ic_selection_checked_24px"),G.createThemedStyleSheet({icon:{color:i.ThemeColorMap.INTERACTIVE_NORMAL},item:{color:i.ThemeColorMap.TEXT_MUTED}});const[n,m]=t.useState(),[s,l]=t.useState();return t.createElement(t.Fragment,null,t.createElement(oe,{onTouchStart:r=>{m(r.nativeEvent.pageX),l(r.nativeEvent.pageY)},onTouchEnd:r=>{n-r.nativeEvent.pageX<-100&&s-r.nativeEvent.pageY<40&&s-r.nativeEvent.pageY>-40&&Z.pop()}},t.createElement(te,null),t.createElement(_,{label:`Plugin Version: ${E}
Release Channel: ${z}`})))},H;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(H||(H={}));var L;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(L||(L={}));var x;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(x||(x={}));var X;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(X||(X={}));var P;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(P||(P={}));var j;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(j||(j={}));async function J(e,n,m){fetch(`https://discord.com/api/v9/channels/${e}/messages/${n}`,{headers:{accept:"*/*",authorization:Q.getToken(),"content-type":"application/json"},referrer:`https://discord.com/channels/${m}/${e}`,referrerPolicy:"strict-origin-when-cross-origin",body:'{"flags":4}',method:"PATCH",mode:"cors",credentials:"include"}).then(s=>{s.status===200?c.open({content:"Embeds succesfully removed!",source:a("ic_trash_24px")}):(c.open({content:"Something went wrong, try again layer...",source:a("ic_alert")}),console.log(s))})}const se={id:"remove-embeds",name:"remove-embeds",displayName:"remove-embeds",description:"Remove all embeds from a provided message",displayDescription:"Remove all embeds from a provided message",type:L.Chat,inputType:x.BuiltInText,options:[{name:"message",displayName:"message",description:"The message URL to remove all embeds",displayDescription:"The message URL to remove all embeds",type:P.String,required:!0}],execute:async function(e,n){let m=/https:\/\/discord.com\/channels\/[0-9]+\/[0-9]+\/[0-9]+/i,s=e[e.findIndex(l=>l.name==="message")].value;if(m.test(s)){let l=s.split("/")[6],r=s.split("/")[5],y=s.split("/")[4];J(r,l,y)}else console.log("[REMOVE-EMBEDS] Invalid message URL provided"),c.open({content:"Invalid message URL provided",source:a("Small")})}},D=C("remove-all-embeds"),[re]=f(u.byProps("openLazy","hideActionSheet")),me={...p,commands:[],onStart(){this.commands=[se],this.patches=[];let e=0,n=3;const m=()=>{try{e++;const s=A("getMessage","getMessages");console.log(`[RemoveAllEmbeds] delayed start attempt ${e}/${n}.`),c.open({content:`[RemoveAllEmbeds] start attempt ${e}/${n}.`,source:a("debug")}),D.before(re,"openLazy",(l,[r,y],le)=>{y==="MessageLongPressActionSheet"&&r.then(W=>{D.after(W,"default",(ae,d,w)=>{var B,M,N,I,k;if(!w.props)return console.log('[RemoveAllEmbeds Local Error: Property "Props" Does not Exist on "res"]'),w;const U=(k=(I=(N=(M=(B=w==null?void 0:w.props)==null?void 0:B.children)==null?void 0:M.props)==null?void 0:N.children)==null?void 0:I.props)==null?void 0:k.children[1];if(U[0].key=="1337")return;const V=s.getMessage(d[0].message.channel_id,d[0].message.id);if(!V.embeds)return console.log("[RemoveAllEmbeds] No message embeds.");const q=t.createElement(_,{key:"1337",label:"Remove All Embeds",leading:t.createElement(_.Icon,{source:a("ic_trash_24px")}),onPress:()=>{let $=V;if(!$||!$.embeds[0])return console.log("[CopyEmbedss]: Original Message not found/not embed"),c.open({content:"This message does not have an embed!",source:"ic_block"});J(d[0].message.channel_id,d[0].message.id,d[0].server_id)}});U.unshift(q)})})})}catch(s){console.log(`[RemoveAllEmbeds Local Error ${s}]`),e<n?(console.warn(`[RemoveAllEmbeds] failed to start. Trying again in ${e}0s.`),c.open({content:`[RemoveAllEmbeds] failed to start trying again in ${e}0s.`,source:a("ic_message_retry")}),setTimeout(m,e*1e4)):(console.error("[RemoveAllEmbeds] failed to start. Giving up."),c.open({content:"[RemoveAllEmbeds] failed to start. Giving up.",source:a("Small")}))}};m()},onStop(){this.commands=[],this.patches=[],D.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(ne,{settings:e})}};K(me);
