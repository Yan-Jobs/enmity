function K(e){window.enmity.plugins.registerPlugin(e)}const d=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const a=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog;const T=window.enmity.modules.common.Token;window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const Q=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const Z=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const $={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,n)=>window.enmity.modules.filters.byName(e,n),byTypeName:(e,n)=>window.enmity.modules.filters.byTypeName(e,n),byDisplayName:(e,n)=>window.enmity.modules.filters.byDisplayName(e,n)};function U(...e){return window.enmity.modules.bulk(...e)}function A(...e){return window.enmity.modules.getByProps(...e)}window.enmity.modules.common;function C(e){return window.enmity.patcher.create(e)}var V="RemoveAllEmbeds",y="1.0.0-beta.6",O="Remove all embeds from a message",Y=[{name:"Yan.",id:"735538297815957584"}],f="https://github.com/Yan-Jobs/remove-all-embeds",G="https://github.com/Yan-Jobs/",z="beta",p={name:V,version:y,description:O,authors:Y,repo:f,github:G,release:z};function i(e){return window.enmity.assets.getIDByName(e)}const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList;const ee=o.Image;o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const oe=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch;const u=o.Text;o.TextInput,o.TouchableHighlight;const w=o.TouchableOpacity;o.TouchableWithoutFeedback,o.Touchable;const h=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel,o.FormRadio;const E=o.FormRow;o.FormSection,o.FormSelect,o.FormSubLabel,o.FormSwitch,o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;const b=window.enmity.modules.common.Components.General.Animated,[S]=U($.byProps("transitionToGuild"));var te=()=>{const e=Z.createThemedStyleSheet({container:{paddingTop:30,paddingLeft:20,marginBottom:-5,flexDirection:"row"},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},image:{width:75,height:75,borderRadius:10},main_text:{opacity:.975,letterSpacing:.25},header:{color:d.ThemeColorMap.HEADER_PRIMARY,fontFamily:d.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:d.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),n=t.useRef(new b.Value(1)).current,m=()=>{b.spring(n,{toValue:1.1,duration:250,useNativeDriver:!0}).start()},s=()=>{b.spring(n,{toValue:1,duration:250,useNativeDriver:!0}).start()},l=()=>{S.openURL(f)},r={transform:[{scale:n}]};return t.createElement(t.Fragment,null,t.createElement(h,{style:e.container},t.createElement(w,{onPress:l,onPressIn:m,onPressOut:s},t.createElement(b.View,{style:[r]},t.createElement(ee,{style:[e.image],source:{uri:"https://cdn.discordapp.com/avatars/735538297815957584/a_2913d42512a616bb73678e97ccdcc4e9.gif?size=1024"}}))),t.createElement(h,{style:e.text_container},t.createElement(w,{onPress:()=>{S.openURL(f)}},t.createElement(u,{style:[e.main_text,e.header]},V," ")),t.createElement(h,{style:{flexDirection:"row"}},t.createElement(u,{style:[e.main_text,e.sub_header]},"A project by"),t.createElement(w,{onPress:()=>{S.openURL(G)}},t.createElement(u,{style:[e.main_text,e.sub_header,{paddingLeft:4,fontFamily:d.Fonts.DISPLAY_BOLD}]},Y[0].name))),t.createElement(h,null,t.createElement(w,{style:{flexDirection:"row"},onPress:()=>{}},t.createElement(u,{style:[e.main_text,e.sub_header]},"Version:"),t.createElement(u,{style:[e.main_text,e.sub_header,{paddingLeft:4,fontFamily:d.Fonts.DISPLAY_BOLD}]},y," "))))))},ne=({settings:e})=>{const[n,m]=t.useState(),[s,l]=t.useState();return t.createElement(t.Fragment,null,t.createElement(oe,{onTouchStart:r=>{m(r.nativeEvent.pageX),l(r.nativeEvent.pageY)},onTouchEnd:r=>{n-r.nativeEvent.pageX<-100&&s-r.nativeEvent.pageY<40&&s-r.nativeEvent.pageY>-40&&Q.pop()}},t.createElement(te,null),t.createElement(E,{label:`Plugin Version: ${y}
Release Channel: ${z}`})))},H;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"})(H||(H={}));var R;(function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"})(R||(R={}));var F;(function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"})(F||(F={}));var j;(function(e){e[e.Role=1]="Role",e[e.User=2]="User"})(j||(j={}));var x;(function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"})(x||(x={}));var J;(function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"})(J||(J={}));async function W(e,n,m){fetch(`https://discord.com/api/v9/channels/${e}/messages/${n}`,{headers:{accept:"*/*",authorization:T.getToken(),"content-type":"application/json"},referrer:`https://discord.com/channels/${m}/${e}`,referrerPolicy:"strict-origin-when-cross-origin",body:'{"flags":4}',method:"PATCH",mode:"cors",credentials:"include"}).then(s=>{s.status===200?a.open({content:"Embeds succesfully removed!",source:i("ic_trash_24px")}):(a.open({content:"Something went wrong, try again layer...",source:i("ic_alert")}),console.log(s))})}const se={id:"remove-embeds",name:"remove-embeds",displayName:"remove-embeds",description:"Remove all embeds from a provided message",displayDescription:"Remove all embeds from a provided message",type:R.Chat,inputType:F.BuiltInText,options:[{name:"message",displayName:"message",description:"The message URL to remove all embeds",displayDescription:"The message URL to remove all embeds",type:x.String,required:!0}],execute:async function(e,n){let m=/https:\/\/discord.com\/channels\/[0-9]+\/[0-9]+\/[0-9]+/i,s=e[e.findIndex(l=>l.name==="message")].value;if(m.test(s)){let l=s.split("/")[6],r=s.split("/")[5],v=s.split("/")[4];W(r,l,v)}else console.log("[REMOVE-EMBEDS] Invalid message URL provided"),a.open({content:"Invalid message URL provided",source:i("Small")})}},L=C("remove-all-embeds"),[re]=U($.byProps("openLazy","hideActionSheet")),me={...p,commands:[],onStart(){this.commands=[se],this.patches=[];let e=0,n=3;const m=()=>{try{e++;const s=A("getMessage","getMessages");console.log(`[RemoveAllEmbeds] delayed start attempt ${e}/${n}.`),a.open({content:`[RemoveAllEmbeds] start attempt ${e}/${n}.`,source:i("debug")}),L.before(re,"openLazy",(l,[r,v],le)=>{v==="MessageLongPressActionSheet"&&r.then(X=>{L.after(X,"default",(ae,c,g)=>{var _,D,P,B,M;if(!g.props)return console.log('[RemoveAllEmbeds Local Error: Property "Props" Does not Exist on "res"]'),g;const N=(M=(B=(P=(D=(_=g==null?void 0:g.props)==null?void 0:_.children)==null?void 0:D.props)==null?void 0:P.children)==null?void 0:B.props)==null?void 0:M.children[1];if(N[0].key=="151")return;const I=s.getMessage(c[0].message.channel_id,c[0].message.id);if(!I.embeds)return console.log("[RemoveAllEmbeds] No message embeds.");const q=t.createElement(E,{key:"151",label:"Remove All Embeds",leading:t.createElement(E.Icon,{source:i("ic_trash_24px")}),onPress:()=>{let k=I;if(!k||!k.embeds[0])return console.log("[CopyEmbedss]: Original Message not found/not embed"),a.open({content:"This message does not have an embed!",source:"ic_block"});W(c[0].message.channel_id,c[0].message.id,c[0].server_id)}});N.unshift(q)})})})}catch(s){console.log(`[RemoveAllEmbeds Local Error ${s}]`),e<n?(console.warn(`[RemoveAllEmbeds] failed to start. Trying again in ${e}0s.`),a.open({content:`[RemoveAllEmbeds] failed to start trying again in ${e}0s.`,source:i("ic_message_retry")}),setTimeout(m,e*1e4)):(console.error("[RemoveAllEmbeds] failed to start. Giving up."),a.open({content:"[RemoveAllEmbeds] failed to start. Giving up.",source:i("Small")}))}};m()},onStop(){this.commands=[],this.patches=[],L.unpatchAll()},getSettingsPanel({settings:e}){return t.createElement(ne,{settings:e})}};K(me);
